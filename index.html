<!DOCTYPE html>
<html>
<head>
    <title>FTC INTO THE DEEP Scoring</title>
    <link rel="icon" href="https://i.ibb.co/3v0rqsx/Ctrl-Y-Logo.png">
</head>
<body style="background-color:#0063cf;">
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1600px;
            margin: 40px auto;
            padding: 20px;
            text-align: center;
        }
        .counters-container {
            display: flex;
            justify-content: center;
            gap: 40px;
        }
        .counter {
            flex: 1;
            max-width: 1600px;
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 15px;
        }
        .total {
            font-size: 48px;
            margin: 20px 0;
        }
        .button-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .button-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 10px;
            min-width: 100px;
        }
        .button {
            font-size: 18px;
            padding: 10px 20px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            color: white;
            transition: background-color 0.3s;
            width: 100px;
            margin: 5px;
        }
        .toggle-button {
            background-color: #4CAF50;
            width: 120px;
            position: relative;
        }
        .toggle-button:hover {
            background-color: #45a049;
        }
        .toggle-value {
            font-size: 24px;
            font-weight: bold;
            margin: 10px 0;
            color: #000000;
        }
        .counter-red {
            border-color: #d34e4e;
            background-color: #ffebee;
        }
        .counter-red .button.add {
            background-color: #4CAF50;
        }
        .counter-red .button.add:hover {
            background-color: #45a049;
        }
        .counter-red .button.subtract {
            background-color: #f44336;
        }
        .counter-red .button.subtract:hover {
            background-color: #da190b;
        }
        .counter-red .button.reset {
            background-color: #d34e4e;
        }
        .counter-red .button.reset:hover {
            background-color: #b83232;
        }
        .counter-blue {
            border-color: #3698ba;
            background-color: #e3f2fd;
        }
        .counter-blue .button.add {
            background-color: #4CAF50;
        }
        .counter-blue .button.add:hover {
            background-color: #45a049;
        }
        .counter-blue .button.subtract {
            background-color: #f44336;
        }
        .counter-blue .button.subtract:hover {
            background-color: #da190b;
        }
        .counter-blue .button.reset {
            background-color: #2196F3;
        }
        .counter-blue .button.reset:hover {
            background-color: #1976D2;
        }
        .click-count {
            margin: 10px 0;
            font-size: 16px;
            color: #666;
        }
        .number-label {
            font-size: 20px;
            font-weight: bold;
            margin: 5px 0;
            color: #333;
        }
        .saves {
            font-size: 10px;
            font-weight: bold;
            margin: 5px 0;
            color: #FFFFFF;
        }
        .global-reset {
            background-color: #f96a00;
            margin-top: 40px;
        }
        .global-reset:hover {
            background-color: #d45a00;
        }
    </style>

    <a href="https://ftc.ctrlyrobotics.org/">
        <img src="https://i.ibb.co/3v0rqsx/Ctrl-Y-Logo.png" style="width:200px;height:200px;">
    </a>
    <h1> </h1>

    <div class="counters-container">
        <!-- Red Alliance -->
        <div class="counter counter-red">
            <h2>Red Alliance</h2>
            <div id="total-1" class="total positive">0</div>
            <div class="button-container">
                <!-- Scoring elements -->
                <div class="button-group">
                    <div class="number-label">Net Zone</div>
                    <button class="button add" onclick="updateTotal(1, 2, 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(1, 2, -1)">-</button>
                    <div class="click-count">Count: <span id="count-1-2">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">Low Basket</div>
                    <button class="button add" onclick="updateTotal(1, 4, 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(1, 4, -1)">-</button>
                    <div class="click-count">Count: <span id="count-1-4">0</span></div>
                </div>

                <div class="button-group">
                    <div class="number-label">High Basket</div>
                    <button class="button add" onclick="updateTotal(1, 8, 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(1, 8, -1)">-</button>
                    <div class="click-count">Count: <span id="count-1-8">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">Low Chamber</div>
                    <button class="button add" onclick="updateTotal(1, 6, 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(1, 6, -1)">-</button>
                    <div class="click-count">Count: <span id="count-1-6">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">High Chamber</div>
                    <button class="button add" onclick="updateTotal(1, 10, 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(1, 10, -1)">-</button>
                    <div class="click-count">Count: <span id="count-1-10">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">Robot 1 Endgame Ascent</div>
                    <div class="toggle-value" id="toggle-value-1-1">0</div>
                    <button class="button toggle-button" onclick="cycleToggleValue(1, 1)">Toggle</button>
                    <div class="click-count">Level <span id="count-1-1-current">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">Robot 2 Endgame Ascent</div>
                    <div class="toggle-value" id="toggle-value-1-2">0</div>
                    <button class="button toggle-button" onclick="cycleToggleValue(1, 2)">Toggle</button>
                    <div class="click-count">Level <span id="count-1-2-current">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">Auto Park/Ascent Count</div>
                    <button class="button add" onclick="updateTotal(1, 'ap', 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(1, 'ap', -1)">-</button>
                    <div class="click-count">Count: <span id="count-1-ap">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">Auto Net Zone</div>
                    <button class="button add" onclick="updateTotal(1, 'an', 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(1, 'an', -1)">-</button>
                    <div class="click-count">Count: <span id="count-1-an">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">Auto Low Basket</div>
                    <button class="button add" onclick="updateTotal(1, 'al', 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(1, 'al', -1)">-</button>
                    <div class="click-count">Count: <span id="count-1-al">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">Auto High Basket</div>
                    <button class="button add" onclick="updateTotal(1, 'ah', 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(1, 'ah', -1)">-</button>
                    <div class="click-count">Count: <span id="count-1-ah">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">Auto Low Chamber</div>
                    <button class="button add" onclick="updateTotal(1, 'lc', 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(1, 'lc', -1)">-</button>
                    <div class="click-count">Count: <span id="count-1-lc">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">Auto High Chamber</div>
                    <button class="button add" onclick="updateTotal(1, 'hc', 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(1, 'hc', -1)">-</button>
                    <div class="click-count">Count: <span id="count-1-hc">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">Minor Foul</div>
                    <button class="button add" onclick="updateTotal(2, 5, 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(2, 5, -1)">-</button>
                    <div class="click-count">Count: <span id="count-2-5">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">Major Foul</div>
                    <button class="button add" onclick="updateTotal(2, 15, 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(2, 15, -1)">-</button>
                    <div class="click-count">Count: <span id="count-2-15">0</span></div>
                </div>
                <!-- Add other button groups here (same structure as original) -->
                <!-- ... -->
            </div>
            <button class="button reset" onclick="resetCounter(1)">Reset Red Alliance</button>
        </div>

        <!-- Blue Alliance -->
        <div class="counter counter-blue">
            <h2>Blue Alliance</h2>
            <div id="total-2" class="total positive">0</div>
            <div class="button-container">
                <div class="button-group">
                    <div class="number-label">Net Zone</div>
                    <button class="button add" onclick="updateTotal(2, 2, 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(2, 2, -1)">-</button>
                    <div class="click-count">Count: <span id="count-2-2">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">Low Basket</div>
                    <button class="button add" onclick="updateTotal(2, 4, 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(2, 4, -1)">-</button>
                    <div class="click-count">Count: <span id="count-2-4">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">High Basket</div>
                    <button class="button add" onclick="updateTotal(2, 8, 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(2, 8, -1)">-</button>
                    <div class="click-count">Count: <span id="count-2-8">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">Low Chamber</div>
                    <button class="button add" onclick="updateTotal(2, 6, 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(2, 6, -1)">-</button>
                    <div class="click-count">Count: <span id="count-2-6">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">High Chamber</div>
                    <button class="button add" onclick="updateTotal(2, 10, 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(2, 10, -1)">-</button>
                    <div class="click-count">Count: <span id="count-2-10">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">Robot 1 Endgame Ascent</div>
                    <div class="toggle-value" id="toggle-value-2-1">0</div>
                    <button class="button toggle-button" onclick="cycleToggleValue(2, 1)">Toggle</button>
                    <div class="click-count">Level <span id="count-2-1-current">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">Robot 2 Endgame Ascent</div>
                    <div class="toggle-value" id="toggle-value-2-2">0</div>
                    <button class="button toggle-button" onclick="cycleToggleValue(2, 2)">Toggle</button>
                    <div class="click-count">Level <span id="count-2-2-current">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">Auto Park/Ascent Count</div>
                    <button class="button add" onclick="updateTotal(2, 'ap', 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(2, 'ap', -1)">-</button>
                    <div class="click-count">Count: <span id="count-2-ap">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">Auto Net Zone</div>
                    <button class="button add" onclick="updateTotal(2, 'an', 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(2, 'an', -1)">-</button>
                    <div class="click-count">Count: <span id="count-2-an">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">Auto Low Basket</div>
                    <button class="button add" onclick="updateTotal(2, 'al', 2)">+</button>
                    <button class="button subtract" onclick="updateTotal(2, 'al', -1)">-</button>
                    <div class="click-count">Count: <span id="count-2-al">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">Auto High Basket</div>
                    <button class="button add" onclick="updateTotal(2, 'ah', 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(2, 'ah', -1)">-</button>
                    <div class="click-count">Count: <span id="count-2-ah">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">Auto Low Chamber</div>
                    <button class="button add" onclick="updateTotal(2, 'lc', 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(2, 'lc', -1)">-</button>
                    <div class="click-count">Count: <span id="count-2-lc">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">Auto High Chamber</div>
                    <button class="button add" onclick="updateTotal(2, 'hc', 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(2, 'hc', -1)">-</button>
                    <div class="click-count">Count: <span id="count-2-hc">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">Minor Foul</div>
                    <button class="button add" onclick="updateTotal(1, 5, 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(1, 5, -1)">-</button>
                    <div class="click-count">Count: <span id="count-1-5">0</span></div>
                </div>
                <div class="button-group">
                    <div class="number-label">Major Foul</div>
                    <button class="button add" onclick="updateTotal(1, 15, 1)">+</button>
                    <button class="button subtract" onclick="updateTotal(1, 15, -1)">-</button>
                    <div class="click-count">Count: <span id="count-1-15">0</span></div>
                </div><!-- Scoring elements -->
                <!-- ... -->
            </div>
            <button class="button reset" onclick="resetCounter(2)">Reset Blue Alliance</button>
        </div>
    </div>

    <button class="button reset global-reset" onclick="resetAll()">Reset Both Alliances</button>

    <script>
        // Counter class to replace Python class
        class Counter {
            constructor() {
                this.total = 0;
                this.click_counts = {
                    "2": 0, "3": 0, "ap": 0, "an": 0,
                    "ah": 0, "al": 0, "hc": 0, "lc": 0,
                    "4": 0, "8": 0, "6": 0, "10": 0,
                    "5": 0, "15": 0, "30": 0
                };
            }
        }

        // Create counters
        const counter1 = new Counter();
        const counter2 = new Counter();

        // Constants
        const COUNTER_LIMITS = {
            '2': 80, 'ap': 2, 'an': 80, 'ah': 80,
            'al': 80, 'hc': 80, 'lc': 80, '4': 80,
            '8': 80, '6': 80, '10': 80,
            '5': 9999999, '15': 9999999
        };

        // Toggle states
        const toggleStates = {
            1: {
                1: { current: 0, previous: 0, count: 0 },
                2: { current: 0, previous: 0, count: 0 }
            },
            2: {
                1: { current: 0, previous: 0, count: 0 },
                2: { current: 0, previous: 0, count: 0 }
            }
        };

        const endpossibleValues = [0, 3, 15, 30];
        const valueToCount = {
            0: 0, 3: 1, 15: 2, 30: 3
        };

        function cycleToggleValue(counterId, robotId) {
            const state = toggleStates[counterId][robotId];
            const currentIndex = endpossibleValues.indexOf(state.current);
            const nextIndex = (currentIndex + 1) % endpossibleValues.length;

            state.previous = state.current;
            state.current = endpossibleValues[nextIndex];

            document.getElementById(`toggle-value-${counterId}-${robotId}`).textContent = state.current;

            if (state.previous !== 0) {
                updateTotal(counterId, state.previous.toString(), -1, true);
            }
            if (state.current !== 0) {
                updateTotal(counterId, state.current.toString(), 1, true);
            }

            document.getElementById(`count-${counterId}-${robotId}-current`).textContent = valueToCount[state.current];
        }

        function updateTotal(counterId, amount, operation, isToggle = false) {
            const counter = counterId === 1 ? counter1 : counter2;

            if (!isToggle && operation === 1) {
                const elementId = `count-${counterId}-${amount}`;
                const currentCount = parseInt(document.getElementById(elementId).textContent);
                if (COUNTER_LIMITS[amount] && currentCount >= COUNTER_LIMITS[amount]) {
                    const button = document.activeElement;
                    if (button) {
                        const originalColor = button.style.backgroundColor;
                        button.style.backgroundColor = '#ff9999';
                        setTimeout(() => {
                            button.style.backgroundColor = originalColor;
                        }, 200);
                    }
                    return;
                }
            }

            let scoreAmount = amount;
            switch(amount) {
                case 'ap': scoreAmount = 3; break;
                case 'al': scoreAmount = 4; break;
                case 'an': scoreAmount = 2; break;
                case 'ah': scoreAmount = 8; break;
                case 'hc': scoreAmount = 10; break;
                case 'lc': scoreAmount = 6; break;
            }

            counter.total += parseInt(scoreAmount) * operation;
            counter.click_counts[amount] += operation;

            // Update UI
            const totalElement = document.getElementById(`total-${counterId}`);
            totalElement.textContent = counter.total;
            totalElement.className = `total ${counter.total >= 0 ? 'positive' : 'negative'}`;

            for (const [key, value] of Object.entries(counter.click_counts)) {
                const element = document.getElementById(`count-${counterId}-${key}`);
                if (element) {
                    element.textContent = value;
                    if (!isToggle && COUNTER_LIMITS[key]) {
                        const percentage = value / COUNTER_LIMITS[key];
                        element.style.color = percentage >= 1 ? '#ff0000' : 
                                            percentage >= 0.8 ? '#ff6600' : '#666';
                    }
                }
            }
        }

        function resetCounter(counterId) {
            const counter = counterId === 1 ? counter1 : counter2;
            counter.total = 0;
            for (const key in counter.click_counts) {
                counter.click_counts[key] = 0;
            }

            const totalElement = document.getElementById(`total-${counterId}`);
            totalElement.textContent = '0';
            totalElement.className = 'total positive';

            for (let robotId = 1; robotId <= 2; robotId++) {
                toggleStates[counterId][robotId] = { current: 0, previous: 0, count: 0 };
                document.getElementById(`toggle-value-${counterId}-${robotId}`).textContent = '0';
                document.getElementById(`count-${counterId}-${robotId}-current`).textContent = '0';
            }

            for (const key in counter.click_counts) {
                const element = document.getElementById(`count-${counterId}-${key}`);
                if (element) {
                    element.textContent = '0';
                    element.style.color = '#666';
                }
            }
        }

        function resetAll() {
            resetCounter(1);
            resetCounter(2);
        }

        // Add keyboard shortcut for saving (Ctrl+S)
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                // Implement save functionality if needed
            }
        });
    </script>
</body>
</html>
